(function(b){var a=function(f,d){var h=b.extend({},b.fn.beforeafter.defaults,d),l=b(f),e,j=0;function k(){var m=l.html();j=l.width();l.html('<div class="ba-canvas">'+m+'<div class="ba-after"></div><div class="ba-slide-wrap"><div class="ba-slide"></div></div></div>');l.find("img").addClass("ba-before");e=l.find(".ba-after");e.css({backgroundImage:"url("+l.data("after")+")",width:0});l.find(".ba-slide").slider({max:j,min:0,slide:g,value:j*0.5,change:g});m=new Image();m.onload=i;m.src=l.data("after");l.find(".ba-canvas").click(c)}function i(){l.find("img").show();l.find(".ba-canvas").delay(500).fadeIn("normal");l.find(".ba-slide-wrap").delay(1200).animate({bottom:0});e.delay(800).animate({width:j*0.5})}function c(m){var n=b(this).offset();l.find(".ba-slide").slider({value:m.clientX-n.left})}function g(n,m){e.width(j-m.value);if(m.value===j){e.hide()}else{if(!e.is(":visible")){e.show()}}}k()};b.fn.beforeafter=function(c){return this.each(function(d,h){var g=b(this),f="ba";if(g.data(f)){return}var e=new a(this,c);g.data(f,e)})};b.fn.beforeafter.defaults={}})(jQuery);
